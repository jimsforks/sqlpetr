<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Connect to a PostgreSQL database — sp_get_postgres_connection • sqlpetr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Connect to a PostgreSQL database — sp_get_postgres_connection" />
<meta property="og:description" content="Attempts to connect to a PostgreSQL database. If the connection
fails, it will retry a user-specified number of times." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sqlpetr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0.9999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/building-the-adventureworks-docker-image.html">Building the `adventureworks` Docker Image</a>
    </li>
    <li>
      <a href="../articles/building-the-dvdrental-docker-image.html">Building the `dvdrental` Docker Image</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Connect to a PostgreSQL database</h1>
    
    <div class="hidden name"><code>sp_get_postgres_connection.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Attempts to connect to a PostgreSQL database. If the connection
fails, it will retry a user-specified number of times.</p>
    </div>

    <pre class="usage"><span class='fu'>sp_get_postgres_connection</span>(
  <span class='kw'>user</span> <span class='kw'>=</span> <span class='st'>"postgres"</span>,
  <span class='kw'>password</span> <span class='kw'>=</span> <span class='st'>"postgres"</span>,
  <span class='kw'>dbname</span> <span class='kw'>=</span> <span class='st'>"dvdrental"</span>,
  <span class='kw'>host</span> <span class='kw'>=</span> <span class='st'>"localhost"</span>,
  <span class='kw'>port</span> <span class='kw'>=</span> <span class='fl'>5439</span>,
  <span class='kw'>seconds_to_test</span> <span class='kw'>=</span> <span class='fl'>30</span>,
  <span class='kw'>connection_tab</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>user</th>
      <td><p>character: Username for connecting to the database. The user
must exist and be authorized to connect. The default is "postgres".</p></td>
    </tr>
    <tr>
      <th>password</th>
      <td><p>character: Password that corresponds to the username. The
password must be correct for the user. The default is "postgres".</p></td>
    </tr>
    <tr>
      <th>dbname</th>
      <td><p>character: The name of the database within the database server.
The database must exist, and the user must be authorized to access it.
The default is "dvdrental".</p></td>
    </tr>
    <tr>
      <th>host</th>
      <td><p>character: The IP address or host where postgreSQL is located,
defaults to "localhost"</p></td>
    </tr>
    <tr>
      <th>port</th>
      <td><p>integer: The port on the host that PostgreSQL listens on, defaults
to <em>5439</em>. Note that this is <em>not</em> the PostgreSQL default port, 5432! Why? If
PostgreSQL is running on the host or in another container, it probably has
claimed port 5432, since that's its default, and our container won't work!
So we need to use a different port for <em>our</em> PostgreSQL container.</p></td>
    </tr>
    <tr>
      <th>seconds_to_test</th>
      <td><p>integer: The number of iterations to try while waiting
for PostgreSQL service to be ready. The function sleeps one second between
connection attempts, so a value of 10 would require approximately 10 seconds.
The default is 30.</p></td>
    </tr>
    <tr>
      <th>connection_tab</th>
      <td><p>logical: <code>sp_get_postgres_connection</code> can open a
tab in the RStudio connections pane. <code>connection_tab = FALSE</code> is
the default - call with <code>connection_tab = TRUE</code> to open the tab.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If successful: a connection object, which is an S4 object
that inherits from DBIConnection, used to communicate with the
database engine. If unsuccessful, the function terminates with an
error message.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) <span class='no'>con</span> <span class='kw'>&lt;-</span> <span class='fu'>sp_get_postgres_connection</span>(
  <span class='kw'>user</span> <span class='kw'>=</span> <span class='st'>"postgres"</span>,
  <span class='kw'>password</span> <span class='kw'>=</span> <span class='st'>"postgres"</span>,
  <span class='kw'>dbname</span> <span class='kw'>=</span> <span class='st'>"postgres"</span>
)
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>build_log</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='sp_make_dvdrental_image.html'>sp_make_dvdrental_image</a></span>(<span class='st'>"test-dvdrental:latest"</span>)
<span class='fu'><a href='sp_docker_images_tibble.html'>sp_docker_images_tibble</a></span>()
<span class='fu'><a href='sp_pg_docker_run.html'>sp_pg_docker_run</a></span>(
  <span class='kw'>container_name</span> <span class='kw'>=</span> <span class='st'>"test-dvdrental"</span>,
  <span class='kw'>image_tag</span> <span class='kw'>=</span> <span class='st'>"test-dvdrental:latest"</span>,
  <span class='kw'>postgres_password</span> <span class='kw'>=</span> <span class='st'>"postgres"</span>
)
<span class='fu'><a href='sp_docker_containers_tibble.html'>sp_docker_containers_tibble</a></span>()
<span class='no'>connection</span> <span class='kw'>&lt;-</span> <span class='fu'>sp_get_postgres_connection</span>(
  <span class='kw'>user</span> <span class='kw'>=</span> <span class='st'>"postgres"</span>,
  <span class='kw'>password</span> <span class='kw'>=</span> <span class='st'>"postgres"</span>,
  <span class='kw'>dbname</span> <span class='kw'>=</span> <span class='st'>"dvdrental"</span>,
  <span class='kw'>host</span> <span class='kw'>=</span> <span class='st'>"localhost"</span>,
  <span class='kw'>port</span> <span class='kw'>=</span> <span class='fl'>5439</span>,
  <span class='kw'>seconds_to_test</span> <span class='kw'>=</span> <span class='fl'>30</span>,
  <span class='kw'>connection_tab</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by M. Edward (Ed) Borasky, John David Smith, Scott Came, Jim Tyhurst.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


